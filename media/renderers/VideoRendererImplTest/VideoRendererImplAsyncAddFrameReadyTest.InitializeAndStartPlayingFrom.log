feiyes@ubuntu:~/code/study/chromium/src$ ./out/Debug/media_unittests --gtest_filter=VideoRendererImplAsyncAddFrameReadyTest.InitializeAndStartPlayingFrom  --log --v=0 --vmodule=video_renderer_impl=4,decoder_stream=5,wall_clock_time_source=5,video_renderer_algorithm=5,ffmpeg_video_decoder=5,decoder_stream_traits=5
IMPORTANT DEBUGGING NOTE: batches of tests are run inside their
own process. For debugging a test inside a debugger, use the
--gtest_filter=<your_test_name> flag along with
--single-process-tests.
Using sharding settings from environment. This is shard 0/1
Using 1 parallel jobs.
Note: Google Test filter = VideoRendererImplAsyncAddFrameReadyTest.InitializeAndStartPlayingFrom
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from VideoRendererImplAsyncAddFrameReadyTest
[ RUN      ] VideoRendererImplAsyncAddFrameReadyTest.InitializeAndStartPlayingFrom
###wangf###, ../../media/base/mock_filters.cc, MockDemuxerStream, 57
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, VideoRendererImplTest, 86
###wangf###, ../../media/base/null_video_sink.cc, NullVideoSink, 27
###wangf###, ../../media/renderers/video_renderer_impl.cc, VideoRendererImpl, 134
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, AdvanceWallclockTimeInMs, 302
###wangf###, ../../media/base/test_helpers.cc, Normal, 196
###wangf###, ../../media/base/test_helpers.cc, GetTestConfig, 148
###wangf###, ../../media/base/mock_filters.cc, set_video_decoder_config, 93
###wangf###, ../../media/base/decoder_buffer.cc, DecoderBuffer, 22
###wangf###, ../../media/base/decoder_buffer.cc, Initialize, 77
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, TestBody, 1311
###wangf###, ../../media/renderers/video_renderer_impl.cc, VideoRendererImpl, 134
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, Initialize, 116
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, InitializeWithLowDelay, 121
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, InitializeRenderer, 129
###wangf###, ../../media/base/test_helpers.cc, WaitableMessageLoopEvent, 75
###wangf###, ../../media/base/test_helpers.cc, WaitableMessageLoopEvent, 70
###wangf###, ../../media/base/test_helpers.cc, GetPipelineStatusCB, 92
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, CallInitialize, 143
###wangf###, ../../media/renderers/video_renderer_impl.cc, Initialize, 216
###wangf###, ../../media/base/mock_filters.cc, type, 63
[5439:5439:0113/010638.308285:23695613570:VERBOSE1:decoder_stream.cc(115)] DecoderStream<video>
###wangf###, ../../media/base/mock_filters.cc, liveness, 68
###wangf###, ../../media/base/mock_filters.cc, video_decoder_config, 79
[5439:5439:0113/010638.310153:23695615425:VERBOSE1:decoder_stream.cc(152)] Initialize<video>
###wangf###, ../../media/base/mock_filters.cc, video_decoder_config, 79
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, CreateVideoDecodersForTest, 65
###wangf###, ../../media/base/mock_filters.cc, MockVideoDecoder, 105
###wangf###, ../../media/base/mock_filters.cc, liveness, 68
###wangf###, ../../media/base/mock_filters.cc, GetDisplayName, 112
[5439:5439:0113/010638.312226:23695617506:VERBOSE2:decoder_stream_traits.cc(162)] MockVideoDecoder
###wangf###, ../../media/base/test_helpers.cc, RunAndWaitForStatus, 105
###wangf###, ../../media/base/mock_filters.cc, GetDisplayName, 112
[5439:5439:0113/010638.313516:23695618800:VERBOSE1:decoder_stream.cc(331)] OnDecoderSelected<video>: MockVideoDecoder
###wangf###, ../../media/renderers/video_renderer_impl.cc, OnStatisticsUpdate, 395
###wangf###, ../../media/base/mock_filters.cc, GetDisplayName, 112
###wangf###, ../../media/base/mock_filters.cc, GetDisplayName, 112
###wangf###, ../../media/base/mock_filters.cc, video_decoder_config, 79
###wangf###, ../../media/renderers/video_renderer_impl.cc, OnVideoDecoderStreamInitialized, 339
###wangf###, ../../media/filters/video_renderer_algorithm.cc, VideoRendererAlgorithm, 45
###wangf###, ../../media/filters/video_renderer_algorithm.cc, Reset, 310
###wangf###, ../../media/renderers/video_renderer_impl.cc, FinishInitialization, 362
###wangf###, ../../media/base/test_helpers.cc, OnCallback, 125
###wangf###, ../../media/base/test_helpers.cc, ~WaitableMessageLoopEvent, 79
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, QueueFrames, 193
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, QueueFrame, 225
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, QueueFrame, 225
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, QueueFrame, 225
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, QueueFrame, 225
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, StartPlayingFrom, 157
[5439:5439:0113/010638.320884:23695626159:VERBOSE1:wall_clock_time_source.cc(49)] SetMediaTime(0)
[5439:5439:0113/010638.321271:23695626543:VERBOSE1:video_renderer_impl.cc(195)] StartPlayingFrom(0)
###wangf###, ../../media/renderers/video_renderer_impl.cc, AttemptRead_Locked, 669
###wangf###, ../../media/renderers/video_renderer_impl.cc, HaveReachedBufferingCap, 739
[5439:5439:0113/010638.321915:23695627424:VERBOSE3:decoder_stream.cc(176)] Read<video>
[5439:5439:0113/010638.322595:23695627865:VERBOSE3:decoder_stream.cc(641)] ReadFromDemuxerStream<video>
###wangf###, ../../media/base/decoder_buffer.cc, AsHumanReadableString, 175
[5439:5439:0113/010638.323114:23695628384:VERBOSE3:decoder_stream.cc(672)] OnBufferReady<video>: 0, timestamp=0 duration=0 size=0 side_data_size=0 is_key_frame=0 encrypted=0 discard_padding (us)=(0, 0)
[5439:5439:0113/010638.323924:23695629200:VERBOSE3:decoder_stream.cc(431)] Decode<video>
[5439:5439:0113/010638.324287:23695629560:VERBOSE3:decoder_stream.cc(456)] DecodeInternal<video>
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, DecodeRequested, 498
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, SatisfyPendingDecode, 267
[5439:5439:0113/010638.325370:23695630786:VERBOSE3:decoder_stream.cc(590)] OnDecodeOutputReady<video>: 0 ms
[5439:5439:0113/010638.325959:23695631229:VERBOSE3:decoder_stream.cc(942)] MaybePrepareAnotherOutput<video>
[5439:5439:0113/010638.326521:23695631794:VERBOSE3:decoder_stream.cc(502)] OnDecodeDone<video>: DecodeStatus::OK
[5439:5439:0113/010638.327010:23695632280:VERBOSE2:decoder_stream.cc(971)] OnPreparedOutputReady<video>
###wangf###, ../../media/renderers/video_renderer_impl.cc, FrameReady, 494
###wangf###, ../../media/filters/video_renderer_algorithm.cc, Reset, 310
###wangf###, ../../media/renderers/video_renderer_impl.cc, AddReadyFrame_Locked, 651
###wangf###, ../../media/filters/video_renderer_algorithm.cc, EnqueueFrame, 342
###wangf###, ../../media/filters/video_renderer_algorithm.cc, ReadyFrame, 23
###wangf###, ../../media/filters/video_renderer_algorithm.cc, UpdateEffectiveFramesQueued, 751
###wangf###, ../../media/renderers/video_renderer_impl.cc, RemoveFramesForUnderflowOrBackgroundRendering, 845
###wangf###, ../../media/renderers/video_renderer_impl.cc, MaybeFireEndedCallback_Locked, 768
###wangf###, ../../media/renderers/video_renderer_impl.cc, UpdateStats_Locked, 710
###wangf###, ../../media/filters/video_renderer_algorithm.cc, GetMemoryUsage, 332
###wangf###, ../../media/renderers/video_renderer_impl.cc, OnStatisticsUpdate, 395
###wangf###, ../../media/filters/video_renderer_algorithm.cc, Render, 56
###wangf###, ../../media/filters/video_renderer_algorithm.cc, AccountForMissedIntervals, 441
###wangf###, ../../media/filters/video_renderer_algorithm.cc, UpdateFrameStatistics, 476
###wangf###, ../../media/filters/video_renderer_algorithm.cc, UpdateEffectiveFramesQueued, 751
###wangf###, ../../media/renderers/video_renderer_impl.cc, CheckForMetadataChanges, 899
###wangf###, ../../media/base/null_video_sink.cc, PaintSingleFrame, 97
###wangf###, ../../media/renderers/video_renderer_impl.cc, HaveEnoughData_Locked, 592
###wangf###, ../../media/renderers/video_renderer_impl.cc, HaveReachedBufferingCap, 739
###wangf###, ../../media/renderers/video_renderer_impl.cc, AttemptRead_Locked, 669
###wangf###, ../../media/renderers/video_renderer_impl.cc, HaveReachedBufferingCap, 739
[5439:5439:0113/010638.338466:23695643744:VERBOSE3:decoder_stream.cc(176)] Read<video>
[5439:5439:0113/010638.338956:23695644226:VERBOSE3:decoder_stream.cc(641)] ReadFromDemuxerStream<video>
###wangf###, ../../media/base/decoder_buffer.cc, AsHumanReadableString, 175
[5439:5439:0113/010638.339558:23695644828:VERBOSE3:decoder_stream.cc(672)] OnBufferReady<video>: 0, timestamp=0 duration=0 size=0 side_data_size=0 is_key_frame=0 encrypted=0 discard_padding (us)=(0, 0)
[5439:5439:0113/010638.340068:23695645678:VERBOSE3:decoder_stream.cc(431)] Decode<video>
[5439:5439:0113/010638.340848:23695646122:VERBOSE3:decoder_stream.cc(456)] DecodeInternal<video>
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, DecodeRequested, 498
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, SatisfyPendingDecode, 267
[5439:5439:0113/010638.341892:23695647163:VERBOSE3:decoder_stream.cc(942)] MaybePrepareAnotherOutput<video>
[5439:5439:0113/010638.342669:23695647942:VERBOSE3:decoder_stream.cc(590)] OnDecodeOutputReady<video>: 10 ms
[5439:5439:0113/010638.343149:23695648422:VERBOSE3:decoder_stream.cc(942)] MaybePrepareAnotherOutput<video>
[5439:5439:0113/010638.343783:23695649056:VERBOSE3:decoder_stream.cc(502)] OnDecodeDone<video>: DecodeStatus::OK
[5439:5439:0113/010638.344355:23695649625:VERBOSE2:decoder_stream.cc(971)] OnPreparedOutputReady<video>
###wangf###, ../../media/renderers/video_renderer_impl.cc, FrameReady, 494
###wangf###, ../../media/renderers/video_renderer_impl.cc, AddReadyFrame_Locked, 651
###wangf###, ../../media/filters/video_renderer_algorithm.cc, EnqueueFrame, 342
###wangf###, ../../media/filters/video_renderer_algorithm.cc, ReadyFrame, 23
###wangf###, ../../media/filters/video_renderer_algorithm.cc, UpdateEffectiveFramesQueued, 751
###wangf###, ../../media/renderers/video_renderer_impl.cc, RemoveFramesForUnderflowOrBackgroundRendering, 845
###wangf###, ../../media/renderers/video_renderer_impl.cc, MaybeFireEndedCallback_Locked, 768
###wangf###, ../../media/renderers/video_renderer_impl.cc, UpdateStats_Locked, 710
###wangf###, ../../media/filters/video_renderer_algorithm.cc, GetMemoryUsage, 332
###wangf###, ../../media/renderers/video_renderer_impl.cc, OnStatisticsUpdate, 395
###wangf###, ../../media/renderers/video_renderer_impl.cc, HaveEnoughData_Locked, 592
###wangf###, ../../media/renderers/video_renderer_impl.cc, HaveReachedBufferingCap, 739
###wangf###, ../../media/renderers/video_renderer_impl.cc, AttemptRead_Locked, 669
###wangf###, ../../media/renderers/video_renderer_impl.cc, HaveReachedBufferingCap, 739
[5439:5439:0113/010638.346593:23695652098:VERBOSE3:decoder_stream.cc(176)] Read<video>
[5439:5439:0113/010638.347264:23695652535:VERBOSE3:decoder_stream.cc(641)] ReadFromDemuxerStream<video>
###wangf###, ../../media/base/decoder_buffer.cc, AsHumanReadableString, 175
[5439:5439:0113/010638.347785:23695653054:VERBOSE3:decoder_stream.cc(672)] OnBufferReady<video>: 0, timestamp=0 duration=0 size=0 side_data_size=0 is_key_frame=0 encrypted=0 discard_padding (us)=(0, 0)
[5439:5439:0113/010638.348770:23695654052:VERBOSE3:decoder_stream.cc(431)] Decode<video>
[5439:5439:0113/010638.348938:23695654505:VERBOSE3:decoder_stream.cc(456)] DecodeInternal<video>
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, DecodeRequested, 498
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, SatisfyPendingDecode, 267
[5439:5439:0113/010638.350597:23695655869:VERBOSE3:decoder_stream.cc(942)] MaybePrepareAnotherOutput<video>
[5439:5439:0113/010638.351251:23695656523:VERBOSE3:decoder_stream.cc(590)] OnDecodeOutputReady<video>: 20 ms
[5439:5439:0113/010638.352214:23695657486:VERBOSE3:decoder_stream.cc(942)] MaybePrepareAnotherOutput<video>
[5439:5439:0113/010638.352623:23695657895:VERBOSE3:decoder_stream.cc(502)] OnDecodeDone<video>: DecodeStatus::OK
[5439:5439:0113/010638.352876:23695658146:VERBOSE2:decoder_stream.cc(971)] OnPreparedOutputReady<video>
###wangf###, ../../media/renderers/video_renderer_impl.cc, FrameReady, 494
###wangf###, ../../media/renderers/video_renderer_impl.cc, AddReadyFrame_Locked, 651
###wangf###, ../../media/filters/video_renderer_algorithm.cc, EnqueueFrame, 342
###wangf###, ../../media/filters/video_renderer_algorithm.cc, ReadyFrame, 23
###wangf###, ../../media/filters/video_renderer_algorithm.cc, UpdateEffectiveFramesQueued, 751
###wangf###, ../../media/renderers/video_renderer_impl.cc, RemoveFramesForUnderflowOrBackgroundRendering, 845
###wangf###, ../../media/renderers/video_renderer_impl.cc, MaybeFireEndedCallback_Locked, 768
###wangf###, ../../media/renderers/video_renderer_impl.cc, UpdateStats_Locked, 710
###wangf###, ../../media/filters/video_renderer_algorithm.cc, GetMemoryUsage, 332
###wangf###, ../../media/renderers/video_renderer_impl.cc, OnStatisticsUpdate, 395
###wangf###, ../../media/renderers/video_renderer_impl.cc, HaveEnoughData_Locked, 592
###wangf###, ../../media/renderers/video_renderer_impl.cc, HaveReachedBufferingCap, 739
###wangf###, ../../media/renderers/video_renderer_impl.cc, AttemptRead_Locked, 669
###wangf###, ../../media/renderers/video_renderer_impl.cc, HaveReachedBufferingCap, 739
[5439:5439:0113/010638.353341:23695658610:VERBOSE3:decoder_stream.cc(176)] Read<video>
[5439:5439:0113/010638.353570:23695658840:VERBOSE3:decoder_stream.cc(641)] ReadFromDemuxerStream<video>
###wangf###, ../../media/base/decoder_buffer.cc, AsHumanReadableString, 175
[5439:5439:0113/010638.353752:23695659021:VERBOSE3:decoder_stream.cc(672)] OnBufferReady<video>: 0, timestamp=0 duration=0 size=0 side_data_size=0 is_key_frame=0 encrypted=0 discard_padding (us)=(0, 0)
[5439:5439:0113/010638.353902:23695659171:VERBOSE3:decoder_stream.cc(431)] Decode<video>
[5439:5439:0113/010638.353967:23695659234:VERBOSE3:decoder_stream.cc(456)] DecodeInternal<video>
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, DecodeRequested, 498
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, SatisfyPendingDecode, 267
[5439:5439:0113/010638.354198:23695659467:VERBOSE3:decoder_stream.cc(942)] MaybePrepareAnotherOutput<video>
[5439:5439:0113/010638.354581:23695659853:VERBOSE3:decoder_stream.cc(590)] OnDecodeOutputReady<video>: 30 ms
[5439:5439:0113/010638.354744:23695660014:VERBOSE3:decoder_stream.cc(942)] MaybePrepareAnotherOutput<video>
[5439:5439:0113/010638.354954:23695660225:VERBOSE3:decoder_stream.cc(502)] OnDecodeDone<video>: DecodeStatus::OK
[5439:5439:0113/010638.355154:23695660422:VERBOSE2:decoder_stream.cc(971)] OnPreparedOutputReady<video>
###wangf###, ../../media/renderers/video_renderer_impl.cc, FrameReady, 494
###wangf###, ../../media/renderers/video_renderer_impl.cc, AddReadyFrame_Locked, 651
###wangf###, ../../media/filters/video_renderer_algorithm.cc, EnqueueFrame, 342
###wangf###, ../../media/filters/video_renderer_algorithm.cc, ReadyFrame, 23
###wangf###, ../../media/filters/video_renderer_algorithm.cc, UpdateEffectiveFramesQueued, 751
###wangf###, ../../media/renderers/video_renderer_impl.cc, RemoveFramesForUnderflowOrBackgroundRendering, 845
###wangf###, ../../media/renderers/video_renderer_impl.cc, MaybeFireEndedCallback_Locked, 768
###wangf###, ../../media/renderers/video_renderer_impl.cc, UpdateStats_Locked, 710
###wangf###, ../../media/filters/video_renderer_algorithm.cc, GetMemoryUsage, 332
###wangf###, ../../media/renderers/video_renderer_impl.cc, OnStatisticsUpdate, 395
###wangf###, ../../media/renderers/video_renderer_impl.cc, HaveEnoughData_Locked, 592
###wangf###, ../../media/renderers/video_renderer_impl.cc, HaveReachedBufferingCap, 739
[5439:5439:0113/010638.355720:23695660989:VERBOSE3:video_renderer_impl.cc(617)] TransitionToHaveEnough_Locked
###wangf###, ../../media/renderers/video_renderer_impl.cc, AttemptRead_Locked, 669
###wangf###, ../../media/renderers/video_renderer_impl.cc, HaveReachedBufferingCap, 739
[5439:5439:0113/010638.355877:23695661147:VERBOSE3:decoder_stream.cc(942)] MaybePrepareAnotherOutput<video>
[5439:5439:0113/010638.355977:23695661245:VERBOSE3:decoder_stream.cc(641)] ReadFromDemuxerStream<video>
###wangf###, ../../media/base/decoder_buffer.cc, AsHumanReadableString, 175
[5439:5439:0113/010638.356128:23695661397:VERBOSE3:decoder_stream.cc(672)] OnBufferReady<video>: 0, timestamp=0 duration=0 size=0 side_data_size=0 is_key_frame=0 encrypted=0 discard_padding (us)=(0, 0)
[5439:5439:0113/010638.356288:23695661556:VERBOSE3:decoder_stream.cc(431)] Decode<video>
[5439:5439:0113/010638.356452:23695661726:VERBOSE3:decoder_stream.cc(456)] DecodeInternal<video>
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, DecodeRequested, 498
###wangf###, ../../media/renderers/video_renderer_impl.cc, OnBufferingStateChange, 401
###wangf###, ../../media/renderers/video_renderer_impl_unittest.cc, Destroy, 175
[5439:5439:0113/010638.357228:23695662498:VERBOSE1:decoder_stream.cc(120)] ~DecoderStream<video>
###wangf###, ../../media/base/decoder_buffer.cc, ~DecoderBuffer, 71
[       OK ] VideoRendererImplAsyncAddFrameReadyTest.InitializeAndStartPlayingFrom (63 ms)
[----------] 1 test from VideoRendererImplAsyncAddFrameReadyTest (92 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (94 ms total)
[  PASSED  ] 1 test.
[1/1] VideoRendererImplAsyncAddFrameReadyTest.InitializeAndStartPlayingFrom (63 ms)
SUCCESS: all tests passed.
Tests took 2 seconds.
feiyes@ubuntu:~/code/study/chromium/src$
feiyes@ubuntu:~/code/study/chromium/src$
